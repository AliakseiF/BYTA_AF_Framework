<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="ee271483-8d70-4a5b-8b44-6dc3c452ad8a" activeEnvironment="Default environment" name="Task3_REST" resourceRoot="" soapui-version="6.0.0" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:RestService" id="7a8a610a-7faf-4a5e-a37b-45acc12fb71b" wadlVersion="http://wadl.dev.java.net/2009/02" name="http://geoip.elib.ru" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://geoip.elib.ru</con:endpoint></con:endpoints><con:resource name="Getdata_mini.pl" path="/cgi-bin/getdata_mini.pl" id="9d320ef3-1682-4eb7-9323-0da2a4e14b24"><con:settings/><con:parameters><con:parameter><con:name>ip</con:name><con:value/><con:style>QUERY</con:style><con:default/></con:parameter><con:parameter><con:name>sid</con:name><con:value>27BZJVHJ</con:value><con:style>QUERY</con:style><con:default>27BZJVHJ</con:default></con:parameter></con:parameters><con:method name="Getdata_mini.pl" id="8eb51d83-b304-462b-8fb8-5e4637152128" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>text/plain; charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="f51ef80d-541e-4e06-9b49-c1abb4687213" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://geoip.elib.ru</con:endpoint><con:request/><con:originalUri>http://geoip.elib.ru/cgi-bin/getdata_mini.pl</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/><con:parameterOrder><con:entry>ip</con:entry><con:entry>sid</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:testSuite id="8195e646-d4f1-4e50-9b56-c8be92ffcec7" name="TestSuite 1"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="947c18cd-962d-459c-8944-8ecaa3f5dd4d" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="CheckData" searchProperties="true"><con:settings/><con:testStep type="groovy" name="generate DataSource File Path" id="4df9e712-cd8f-428d-92ae-0c1ee9abed88"><con:settings/><con:config><script>def projectDir = context.expand('${projectDir}');
testRunner.testCase.testSuite.setPropertyValue( "path", (projectDir.toString()+"\\ip.xlsx") )</script></con:config></con:testStep><con:testStep type="datasource" name="DataSource" id="e53a8c64-1b9d-48e9-958f-6fab2dae3092"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Excel"><con:configuration><file>${#TestSuite#path}</file><worksheet>ip</worksheet><cell>A2</cell><ignoreEmpty>true</ignoreEmpty></con:configuration></con:dataSource><con:property>ip</con:property><con:property>context</con:property><con:startRow/><con:endRow/><con:trimValues>false</con:trimValues><con:entitizeValues>false</con:entitizeValues><con:restartOnRun>true</con:restartOnRun><con:expandProperties>false</con:expandProperties></con:config></con:testStep><con:testStep type="restrequest" name="getData" id="6115e8cf-56da-43ee-a4bd-caa51ddc526e"><con:settings/><con:config service="http://geoip.elib.ru" resourcePath="/cgi-bin/getdata_mini.pl" methodName="Getdata_mini.pl" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getData" id="f51ef80d-541e-4e06-9b49-c1abb4687213" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding xsi:nil="true"/><con:endpoint>http://geoip.elib.ru</con:endpoint><con:request/><con:originalUri>http://geoip.elib.ru/cgi-bin/getdata_mini.pl</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="2c83604d-d983-4cea-a145-58882dada3ad" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="XPath Match" id="d3022c72-4398-47c3-b696-8a5e5c1ab055" name="Match content of [data]"><con:configuration><path>//data[1]/text()</path><content>${DataSource#context}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="14fa41a6-97ec-4e92-8485-e5685f56ca51" name="Assert node [data]"><con:configuration><scriptText>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def holder = groovyUtils.getXmlHolder("RequestStepName#Response")
def holder = new XmlHolder( messageExchange.responseHeaders )
def contentEncoding = holder.containsValue("gzip")
</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="832ab29f-451b-4fd0-8f2f-9c88efc766f7" name="Script Assertion"><con:configuration><scriptText>def value = messageExchange.responseHeaders["Content-Encoding"].toString()
assert value == "[gzip]"
</scriptText></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="ip" value="${DataSource#ip}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ip</con:entry><con:entry>sid</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop" id="a11bb951-672a-4d37-83cf-9c43fa224976"><con:settings/><con:config><dataSourceStep>DataSource</dataSourceStep><targetStep>Getdata_mini.pl - Request 1</targetStep></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>e53a8c64-1b9d-48e9-958f-6fab2dae3092</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6115e8cf-56da-43ee-a4bd-caa51ddc526e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a11bb951-672a-4d37-83cf-9c43fa224976</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4df9e712-cd8f-428d-92ae-0c1ee9abed88</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="114be611-8165-4c90-a50c-9889ded466e4" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="checkErrors" searchProperties="true"><con:settings/><con:testStep type="datasource" name="DataSource" id="fcf948e8-c43b-4377-9011-e2a6ac6063bb"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Excel"><con:configuration><file>${#TestSuite#path}</file><worksheet>errors</worksheet><cell>A2</cell><ignoreEmpty>true</ignoreEmpty></con:configuration></con:dataSource><con:property>ip</con:property><con:property>error</con:property><con:startRow/><con:endRow/><con:trimValues>false</con:trimValues><con:entitizeValues>false</con:entitizeValues><con:restartOnRun>true</con:restartOnRun><con:expandProperties>false</con:expandProperties></con:config></con:testStep><con:testStep type="restrequest" name="checkError" id="7dbeb95c-c8f3-409c-815d-b5bd9787a057"><con:settings/><con:config service="http://geoip.elib.ru" resourcePath="/cgi-bin/getdata_mini.pl" methodName="Getdata_mini.pl" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="checkError" id="f51ef80d-541e-4e06-9b49-c1abb4687213" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding xsi:nil="true"/><con:endpoint>http://geoip.elib.ru</con:endpoint><con:request/><con:originalUri>http://geoip.elib.ru/cgi-bin/getdata_mini.pl</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="2c83604d-d983-4cea-a145-58882dada3ad" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="XPath Match" id="616b46c0-7f74-447c-b673-f76acd315cff" name="Match content of [data]"><con:configuration><path>//data[1]/text()</path><content>${DataSource#error}
</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="32ec86e7-b235-4d55-a2e4-dba5688356ad" name="Script Assertion"><con:configuration><scriptText>def value = messageExchange.responseHeaders["Content-Encoding"].toString()
assert value == "[gzip]"</scriptText></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="ip" value="${DataSource#ip}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ip</con:entry><con:entry>sid</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop" id="a7ba71c8-ca6d-4898-827f-d6e94e984287"><con:settings/><con:config><dataSourceStep>DataSource</dataSourceStep><targetStep>checkError</targetStep></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>e53a8c64-1b9d-48e9-958f-6fab2dae3092</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6115e8cf-56da-43ee-a4bd-caa51ddc526e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a11bb951-672a-4d37-83cf-9c43fa224976</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>af1c4863-c2b8-4a26-b4e6-3ceaf7e9a9b6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties><con:property><con:name>path</con:name><con:value>C:\Users\Aliaksei_Famenka\Desktop\ip.xlsx</con:value></con:property></con:properties><con:reportParameters/></con:testSuite><con:requirements/><con:properties/><con:wssContainer/><con:databaseConnectionContainer/><con:oAuth2ProfileContainer/><con:reporting><con:reportTemplates/><con:xmlTemplates/><con:xmlTemplates/><con:parameters/><con:parameters/></con:reporting><con:reporting/><con:authRepository/></con:soapui-project>